(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[980],{92299:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/await_tree",function(){return t(4225)}])},4225:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return v}});var c=t(85893),o=t(40639),l=t(83234),i=t(57026),r=t(47741),a=t(19604),s=t(96486),u=t.n(s),d=t(9008),h=t.n(d),f=t(67294),p=t(65098),x=t(6448),m=t(86357),w=t(27071),j=t(64578),g=t(49023);function v(){let{response:e}=(0,g.Z)(j.OL),[n,t]=(0,f.useState)(),[s,d]=(0,f.useState)("");(0,f.useEffect)(()=>{e&&!n&&t("")},[e,n]);let v=async()=>{let e,t;if(void 0!==n){e=""===n?"Await-Tree Dump of All Compute Nodes:":"Await-Tree Dump of Compute Node ".concat(n,":"),d("Loading...");try{let c=m.Kv.fromJSON(await w.ZP.get("/monitor/await_tree/".concat(n))),o=u()(c.actorTraces).entries().map(e=>{let[n,t]=e;return"[Actor ".concat(n,"]\n").concat(t)}).join("\n"),l=u()(c.rpcTraces).entries().map(e=>{let[n,t]=e;return"[RPC ".concat(n,"]\n").concat(t)}).join("\n");t="".concat(e,"\n\n").concat(o,"\n").concat(l)}catch(n){t="".concat(e,"\n\nERROR: ").concat(n.message,"\n").concat(n.cause)}d(t)}},_=(0,c.jsxs)(o.kC,{p:3,height:"calc(100vh - 20px)",flexDirection:"column",children:[(0,c.jsx)(x.Z,{children:"Await Tree Dump"}),(0,c.jsxs)(o.kC,{flexDirection:"row",height:"full",width:"full",children:[(0,c.jsx)(o.gC,{mr:3,spacing:3,alignItems:"flex-start",width:200,height:"full",children:(0,c.jsxs)(l.NI,{children:[(0,c.jsx)(l.lX,{children:"Compute Nodes"}),(0,c.jsxs)(o.gC,{children:[(0,c.jsxs)(i.Ph,{onChange:e=>t(e.target.value),children:[e&&(0,c.jsx)("option",{value:"",children:"All"},""),e&&e.map(e=>{var n,t;return(0,c.jsxs)("option",{value:e.id,children:["(",e.id,") ",null===(n=e.host)||void 0===n?void 0:n.host,":",null===(t=e.host)||void 0===t?void 0:t.port]},e.id)})]}),(0,c.jsx)(r.zx,{onClick:e=>v(),width:"full",children:"Dump"})]})]})}),(0,c.jsx)(o.xu,{flex:1,height:"full",ml:3,overflowX:"scroll",overflowY:"scroll",children:void 0===s?(0,c.jsx)(p.Z,{}):(0,c.jsx)(a.ZP,{language:"sql",options:{fontSize:13,readOnly:!0,renderWhitespace:"boundary",wordWrap:"on"},defaultValue:'Select a compute node and click "Dump"...',value:s})})]})]});return(0,c.jsxs)(f.Fragment,{children:[(0,c.jsx)(h(),{children:(0,c.jsx)("title",{children:"Await Tree Dump"})}),_]})}}},function(e){e.O(0,[662,235,970,206,888,774,179],function(){return e(e.s=92299)}),_N_E=e.O()}]);